params {
  email                             = ""
  executor                          = "slurm"
  runtime                           = "singularity" // conda, docker, singularity
  storeDir                          = "$WORK/_data/outputs/results"
  publishDir                        = "$WORK/_data/outputs/publish"
  traceDir                          = ""
  tempDir                           = ""
  containerCacheDir                 = ""
  q2cacheDir                        = "$WORK/_data/outputs/cache"
  q2cacheDirExists                  = "ok"
  runId                             = "RUN001" // cannot be empty
  inputReadsCache                   = "$WORK/_data/cache" // if on a NAS, add a mount to the singularity.config
  inputReads                        = "reads_paired" // key to the reads in the inputReadsCache
}

process {
  withLabel: needsInternet {
    module = ""
  }
}

includeConfig 'conf/tools.config'
includeConfig 'conf/resources.config'

def timestamp = new java.util.Date().format( 'yyyyMMddHHmmss' )
trace {
    enabled   = false
    file      = "${params.traceDir}/${timestamp}_trace.txt"
}
timeline {
    enabled   = false
    file      = "${params.traceDir}/${timestamp}_timeline.html"
}
report {
    enabled   = false
    file      = "${params.traceDir}/${timestamp}_report.html"
}
dag {
    enabled   = false
    file      = "${params.traceDir}/${timestamp}_dag.svg"
}

profiles {
  slurm {
    executor {
      name = "slurm"
      perCpuMemAllocation = true
    }
    if (params.runtime == "conda" ) {
      includeConfig 'conf/conda.config'
    } else if (params.runtime == "docker") {
      includeConfig 'conf/docker.config'
    } else if (params.runtime == "singularity") {
      includeConfig 'conf/singularity.config'
    } else {
      // error out
    }
    
  }
}

env {
  NUMBA_DISABLE_INTEL_SVML = 1
}

tower {
  accessToken                   = ''
  endpoint                      = ''
  enabled                       = false
}
