process {
  // memory amounts are total (per job)

  withLabel: fondue { 
    cpus = 2
    memory = 2.GB
    time = 4.h
    clusterOptions = "--tmp=50G"
  }
  
  withLabel: readSimulation {
    cpus = 8
    memory = 24.GB
    time = 24.h
  }

  withLabel: fastp {
    cpus = 1
    memory = { 6.GB * task.attempt }
    time = { 1.h * task.attempt }
  }
  
  withLabel: hostRemoval {
    cpus = 12
    memory = 36.GB
    time = 12.h
  }

  withLabel: readSubsampling {
    time = 4.h
  }

  withLabel: genomeAssembly {
    cpus = 3
    memory = { 8.GB * task.attempt }
    time = { 3.h * task.attempt }
  }
  
  withLabel: contigEvaluation {
    cpus = 16
    memory = 196.GB
    time = 24.h
  }

  withLabel: indexing {
    cpus = 1
    memory = { 3.GB * task.attempt }
    time = { 2.h * task.attempt }
  }

  withLabel: readMapping {
    cpus = 2
    memory = { 96.GB * task.attempt }
    time = { 1.h * task.attempt }
  }
  
  withLabel: contigBinning {
    cpus = 12
    memory = 4.GB
    time = 6.h
  }

  withLabel: checkm {
    cpus = 6
    memory = 8.GB
    time = 12.h
  }
  
  withLabel: busco {
    cpus = 4
    memory = 32.GB
    time = 4.h
  }
  
  withLabel: dereplication {
    cpus = 1
    memory = 8.GB
    time = 6.h
  }
  
  withLabel: abundanceEstimation {
    cpus = 12
    memory = 36.GB
    time = 12.h
  }

  withLabel: taxonomicClassification { 
    cpus = 24
    memory = 24.GB
    time = 4.h
  }

  withLabel:  orthologSearch { 
    cpus = 16
    memory = 12.GB
    time = 48.h
  }

  withLabel:  functionalAnnotation { 
    cpus = 16
    memory = 56.GB
    time = 48.h
  }

  withLabel:  collation { 
    memory = 16.GB
    time = 2.h
  }

  withLabel:  needsInternet {
      module  = params.internetModule
  }

}
